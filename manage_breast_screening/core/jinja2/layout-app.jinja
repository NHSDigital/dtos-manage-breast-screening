{% from 'nhsuk/components/header/macro.jinja' import header %}
{% from 'nhsuk/components/back-link/macro.jinja' import backLink %}
{% from "notification-banner/macro.jinja" import notificationBanner %}
{% from 'components/appointment-status-bar.jinja' import app_appointment_status_bar %}

{% set assetPath = STATIC_URL ~ "/assets" %}
{% extends "nhsuk/template.jinja" %}

{% block head %}
  <meta name="robots" content="noindex, nofollow, noarchive">
  <link rel="stylesheet" href="{{ static('css/main.css' )}}">
{% endblock %}

{% block pageTitle %}{% if form and form.errors %}Error: {% endif %}{% if page_title %}{{ page_title }} – {% endif %}Manage breast screening – NHS{% endblock %}

{% block header %}
  {{ header({
    "service": {
      "text": "Manage breast screening"
    },
    "account": {
      "items": header_account_items(request.user)
    },
    "navigation": {
      "items": [
        {
          "href": "/",
          "text": "Home",
          "current": true if navActive == "home"
        },
        {
          "href": "/clinics/",
          "text": "Screening",
          'current': true if navActive == "clinics"
        }
      ]
    }
  }) }}

  {{
    app_appointment_status_bar(request.user, presented_appointment.status_bar)
  }}
{% endblock %}

{% block beforeContent %}
  {% if back_link_params %}
  {{ backLink(back_link_params) }}
  {% endif %}
{% endblock beforeContent %}

{% block content %}
  {% block flash_messages %}
    {% set info_notification_params = get_notification_banner_params(
        request, message_type='info',
        disable_auto_focus=disable_auto_focus|default(true)
      ) %}

    {% set success_notification_params = get_notification_banner_params(
        request, message_type='success',
        disable_auto_focus=disable_auto_focus|default(true)
      ) %}

    {% set warning_notification_params = get_notification_banner_params(
        request, message_type='warning',
        disable_auto_focus=disable_auto_focus|default(true)
      ) %}

    {% if success_notification_params %}
      {{ notificationBanner(success_notification_params) }}
    {% endif %}

    {% if info_notification_params %}
      {{ notificationBanner(info_notification_params) }}
    {% endif %}

    {% if warning_notification_params %}
      {{ notificationBanner(warning_notification_params) }}
    {% endif %}
  {% endblock flash_messages %}

  {% block page_content %}
  {% endblock page_content %}
{% endblock content %}

{% block bodyEnd %}
  <script type="module" src="{{ static('js/bundle.js' )}}"></script>
{% endblock %}
