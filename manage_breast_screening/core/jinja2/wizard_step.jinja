{% extends 'layout-app.jinja' %}
{% from 'nhsuk/components/button/macro.jinja' import button %}
{% from 'nhsuk/components/back-link/macro.jinja' import backLink %}
{% from 'django_form_helpers.jinja' import form_error_summary %}

{% block beforeContent %}
{# Using javascript temporarily - this should be replaced with proper URLs #}
{{ backLink({
  "href": "javascript:history.back()",
}) }}
{% endblock beforeContent %}

{% block page_content %}
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-two-thirds">
    {{ form_error_summary(form) }}
  </div>
</div>
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">

  {% block heading %}
  <h1 class="nhsuk-heading-l">
    {% if caption %}
      <span class="nhsuk-caption-l">{{ caption }}</span>
    {% endif %}
    {{ heading }}
  </h1>
  {% endblock heading %}

  {% block step_content %}{% endblock %}

  {% block wizard_form %}
    {% if form %}
    <form action="{{ request.path }}" method="post" novalidate>
      <div class="nhsuk-grid-row">
          <div class="nhsuk-grid-column-two-thirds">
            {% block form %}{% endblock form %}

            {% if form.decision %}
              {{ form.decision.as_field_group() }}
            {% endif %}

            {{ button({
              "text": "Continue"
            }) }}

            {{csrf_input}}
          </div>
      </div>
    </form>
    {% endif %}
  {% endblock wizard_form %}

  {% if cannot_continue_link %}
    <p><a class="nhsuk-link nhsuk-link--no-visited-state" href="{{ cannot_continue_link.href }}">{{ cannot_continue_link.text }}</a></p>
  {% endif %}
  </div>

</div>
{% endblock page_content %}
