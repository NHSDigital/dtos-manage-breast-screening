{% from 'radios/macro.jinja' import radios %}
{% set unbound_field = field.field %}
{% if field.errors %}
  {% set error_message = {"text": field.errors | first} %}
{% endif %}
{% set ns = namespace(items=[]) %}
{% for value, text in unbound_field.choices %}
  {% set conditional_field = field.conditional_for_value(value) %}
  {% set conditional_html %}
    {{ conditional_field }}
  {% endset %}
  {% set ns.items = ns.items + [{
    "id": field.auto_id if loop.first,
    "value": value,
    "text": text,
    "checked": field.value() == value,
    "conditional": {
      "html": conditional_html
    } if conditional_field else undefined
  }] %}
{% endfor %}
{{ radios({
  "name": field.html_name,
  "idPrefix": field.auto_id,
  "fieldset":  {
    "legend": {
      "text": field.label,
      "classes": unbound_field.label_classes
    }
  },
  "errorMessage": error_message,
  "hint": {
    "html": hint|e
  } if hint,
  "items": ns.items
}) }}
