{% extends 'layout-appointment.jinja' %}
{% from 'nhsuk/components/button/macro.jinja' import button %}
{% from 'nhsuk/components/inset-text/macro.jinja' import insetText %}

{% block tab_content %}
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-two-thirds">

    {% set inset_html %}
      <p>
        If adjustments are required,
        <a href="{{ presented_appointment.special_appointment_url }}">
          provide special appointment details instead
        </a>
      </p>
    {% endset %}
    {{ insetText({
      "html": inset_html
    }) }}

    <form action="{{ request.path }}" method="POST" novalidate>
      {{ csrf_input }}
      {{ form.content.as_field_group() }}

      <div class="nhsuk-button-group">
        {{ button({
          "text": "Save note"
        }) }}
        {% if form.instance_is_saved %}
          <p>
            <a href="{{ url('mammograms:delete_appointment_note', kwargs={'pk': presented_appointment.pk}) }}" class="nhsuk-link app-link--warning">
              Delete appointment note
            </a>
          </p>
        {% endif %}
      </div>
    </form>

  </div>
</div>
{% endblock %}
