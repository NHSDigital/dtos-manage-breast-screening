{% from "nhsuk/components/card/macro.jinja" import card %}
{% from "nhsuk/components/inset-text/macro.jinja" import insetText %}

{% if image_count > 0 %}
  {% set inset_text_html %}
    <p>
      {{ image_count }} image{{ " has" if image_count == 1 else "s have" }} been received
    </p>
  {% endset %}
{% else %}
  {% set inset_text_html %}
    <span class="nhsuk-u-visually-hidden">Information: </span>
    <p>
      Mammography images will appear below once they have been received
    </p>
  {% endset %}
{% endif %}

{{ insetText({ "html": inset_text_html }) }}

{% if image_count > 0 %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-one-half">
      {% set right_views_html %}
        {% with images=images["RMLO"], laterality="RMLO" %}
          {% include "mammograms/_image_set.jinja" %}
        {% endwith %}
        {% with images=images["RCC"], laterality="RCC" %}
          {% include "mammograms/_image_set.jinja" %}
        {% endwith %}
      {% endset %}
      {{ card({
        "heading": "Right breast",
        "headingLevel": "2",
        "feature": true,
        "descriptionHtml": right_views_html
      }) }}
    </div>

    <div class="nhsuk-grid-column-one-half">
      {% set left_views_html %}
        {% with images=images["LMLO"], laterality="LMLO" %}
          {% include "mammograms/_image_set.jinja" %}
        {% endwith %}
        {% with images=images["LCC"], laterality="LCC" %}
          {% include "mammograms/_image_set.jinja" %}
        {% endwith %}
      {% endset %}
      {{ card({
        "heading": "Left breast",
        "headingLevel": "2",
        "feature": true,
        "descriptionHtml": left_views_html
      }) }}
    </div>
  </div>
{% endif %}

<noscript>
  <p class="nhsuk-body-s nhsuk-u-margin-top-4">
    <a href="" class="nhsuk-link">Refresh the page</a> to see new images.
  </p>
</noscript>

<input type="hidden" name="lmlo_count" value="{{ images["LMLO"]|length }}" />
<input type="hidden" name="lcc_count" value="{{ images["LCC"]|length }}" />
<input type="hidden" name="rmlo_count" value="{{ images["RMLO"]|length }}" />
<input type="hidden" name="rcc_count" value="{{ images["RCC"]|length }}" />
