{% extends "wizard_step.jinja" %}
{% from 'nhsuk/components/card/macro.jinja' import card %}
{% from 'nhsuk/components/warning-callout/macro.jinja' import warningCallout %}
{% from 'components/appointment-status/macro.jinja' import appointment_status %}
{% from 'components/appointment-header/macro.jinja' import appointment_header %}
{% from 'components/participant-details/macro.jinja' import participant_details %}
{% from 'components/secondary-navigation/macro.jinja' import app_secondary_navigation %}
{% from 'mammograms/special_appointments/special_appointment_banner.jinja' import special_appointment_banner %}

{% block heading %}
  <div class="app-header">
    <h1 class="nhsuk-heading-l">
      <span class="nhsuk-caption-l">
        {{ caption }}
      </span>
      {{ heading }}
    </h1>

    <div class="app-header__status-tag">
      {{ appointment_status(
        appointment=presented_appointment,
        csrf_input=csrf_input
      )}}
    </div>
  </div>
{% endblock %}

{% block step_content %}
  {{ appointment_header(request.user, presented_appointment, csrf_input=csrf_input) }}

  {{ special_appointment_banner(presented_appointment.special_appointment, show_change_link=True) }}

  {{ card({
    "headingHtml": " ",
    "headingLevel": "2",
    "descriptionHtml": participant_details(
      presented_participant=presented_participant,
      presented_mammograms=presented_mammograms,
      return_url=request.path,
      screening_protocol=presented_appointment.screening_protocol
    )
  }) }}
{% endblock %}
